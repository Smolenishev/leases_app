### Описание логики расчетов по IFRS 16 Leases в предоставленном коде

Код представляет собой веб-приложение для расчета обязательств и активов по аренде в соответствии с требованиями стандарта IFRS 16 (ФСБУ 25/2018). Основная логика расчетов реализована в функции `calculate()`, которая вызывается при нажатии на кнопку "Рассчитать". Рассмотрим ключевые этапы расчетов:

---

#### 1. **Ввод данных**
Пользователь вводит следующие параметры:
- **Срок аренды (лет)**: количество лет, на которые заключен договор аренды.
- **Годовой платеж (млн.руб.)**: фиксированный ежегодный платеж по аренде.
- **Ставка дисконтирования (%)**: процентная ставка, используемая для дисконтирования будущих платежей.

Эти данные используются для расчета приведенной стоимости арендных обязательств и других показателей.

---

#### 2. **Расчет приведенной стоимости (PV) арендных обязательств**
Приведенная стоимость будущих арендных платежей рассчитывается по формуле дисконтирования:

\[
PV = \sum_{i=1}^{n} \frac{\text{Годовой платеж}}{(1 + r)^i}
\]

Где:
- \( n \) — срок аренды (лет),
- \( r \) — ставка дисконтирования (в долях, например, 16% = 0.16).

В коде это реализовано следующим образом:
```javascript
let pv = 0;
for (let i = 1; i <= leaseTerm; i++) {
    pv += annualPayment / Math.pow(1 + discountRate, i);
}
```

---

#### 3. **Расчет обязательств по аренде**
После расчета приведенной стоимости (PV) создается массив `leaseData`, который содержит данные по каждому году аренды. Для каждого года рассчитываются:
- **Процентные расходы**: произведение остатка обязательства на начало года и ставки дисконтирования.
- **Погашение основного долга**: разница между годовым платежом и процентными расходами.
- **Конечный остаток обязательства**: начальный остаток минус погашение основного долга.

```javascript
const interest = leaseLiability * discountRate;
const principal = annualPayment - interest;
leaseLiability -= principal;
```

---

#### 4. **Расчет амортизации актива**
Право пользования активом амортизируется равномерно в течение срока аренды. Годовая амортизация рассчитывается как:
\[
\text{Годовая амортизация} = \frac{PV}{\text{Срок аренды}}
\]

В коде:
```javascript
const annualDepreciation = pv / leaseTerm;
```

Для каждого года также рассчитываются:
- **Накопленная амортизация**: сумма амортизации за все предыдущие годы.
- **Остаточная стоимость актива**: начальная стоимость минус накопленная амортизация.

---

#### 5. **Итоговые показатели**
После расчета данных для каждого года вычисляются общие показатели:
- **Общие процентные расходы**: сумма процентных расходов за все годы.
- **Сумма погашения основного долга**: сумма погашенного основного долга за все годы.
- **Общая сумма амортизации**: сумма амортизации за все годы.
- **Общая сумма платежей арендатора**: сумма всех арендных платежей (проценты + основное тело долга).

---

#### 6. **Отображение результатов**
Результаты расчетов отображаются в виде:
- **Сводных показателей** (например, начальная стоимость права аренды, общие процентные расходы и т.д.).
- **Таблиц**:
  - Таблица обязательств по аренде (начальный остаток, процентные расходы, погашение основного долга, конечный остаток).
  - Таблица актива (амортизация за год, накопленная амортизация, остаточная стоимость).
- **Графиков**:
  - График 1: Остаток обязательства и остаточная стоимость актива по годам.
  - График 2: Процентные расходы и погашение основного долга по годам.

---

#### 7. **Графики**
Для визуализации данных используются библиотека Chart.js:
- **Линейный график** (Line Chart) показывает изменение остатка обязательства и остаточной стоимости актива по годам.
- **Столбчатый график** (Bar Chart) показывает процентные расходы и погашение основного долга по годам.

---

### Пример расчетов
Предположим, пользователь ввел следующие данные:
- Срок аренды: 8 лет,
- Годовой платеж: 100 млн.руб.,
- Ставка дисконтирования: 16%.

1. **Приведенная стоимость (PV)**:
   \[
   PV = \frac{100}{(1 + 0.16)^1} + \frac{100}{(1 + 0.16)^2} + \dots + \frac{100}{(1 + 0.16)^8}
   \]
   Результат: 439,20 млн.руб.

2. **Годовая амортизация**:
   \[
   \text{Годовая амортизация} = \frac{439,20}{8} = 54,90 \text{ млн.руб.}
   \]

3. **Процентные расходы и погашение основного долга**:
   - В первый год:
     \[
     \text{Процентные расходы} = 439,20 \times 0,16 = 70,27 \text{ млн.руб.}
     \]
     \[
     \text{Погашение основного долга} = 100 - 70,27 = 29,73 \text{ млн.руб.}
     \]
     \[
     \text{Конечный остаток} = 439,20 - 29,73 = 409,47 \text{ млн.руб.}
     \]

---

### Заключение
Код реализует основные требования IFRS 16, включая расчет приведенной стоимости арендных обязательств, амортизацию актива и отображение результатов в удобной форме. Это позволяет пользователю анализировать финансовые последствия аренды в соответствии с международными стандартами финансовой отчетности.
